# 4AHITS ITSE Port probing und scanning

---

Name: Xu Matthias Chen   
Klasse: 4AHITS   
Fach: ITSE   
Datum: 03.11.2025   

---

## Ãœbung (nmap port scan)
Nach dem ping scan (und wenn nicht die Option -sn angegeben ist) fÃ¼hrt nmap automatisch einen port scan auf allen gefundenen hosts aus. Dabei wird versucht alle offenen Ports eines Hosts zu finden. Das Ziel ist eine Liste der am Host laufenden Dienste zu erhalten.

Hinweise: Man kann eine einzelne IP Adresse angeben, dann wird nur diese gescannt, z.B.: nmap 192.168.178.42

Siehe List of TCP and UDP port numbers

Aufgaben:

- FÃ¼hre einen port scan auf die Metasploitable VM durch. Analysiere das Ergebnis.

- Experimentiere mit den Optionen fÃ¼r (Victim ist Metasploitable VM):
 - Scannen aller mÃ¶glichen Ports. Macht das bei Metasploitable, verglichen zum Default Verhalten, einen Unterschied?
 - Ãœberspringen Ping-Scan/Host-Discovery. Warum kann diese Option notwendig sein?
 - Service/Version Detection
 - OS Erkennung
 - Aggressive Scan
 - Timing/Speed
 - Ausgabe in Dateien
 - die Option --reason
 - nur die N hÃ¤ufigsten Ports scannen (dokumentiere den Geschwindigkeitsgewinn)
- FÃ¼hre weitere port scans durch, auf:
 - einem Kali Linux auf einem anderen Rechner
 - einem Windows System
 - dem Default Gateway im Labor Netz
- Was kann alles mit einem port scan herausgefunden werden? Dokumentiere!

### Arbeitsschritte

#### Scannen aller Ports:

```
sudo nmap -p- IP-Addresse
```

- Ãœberspringen Ping-Scan/Host-Discovery. Warum kann diese Option notwendig sein?
 
Manche Hosts/Firewalls blockieren ICMP oder einzelne Probe-Pings â†’ Host wÃ¼rde als â€downâ€œ erscheinen und nicht gescannt werden.

-Pn zwingt nmap, ohne Host-Discovery direkt Ports zu scannen. NÃ¼tzlich bei stark gefilterten Zielnetzwerken oder wenn ICMP/ARP geblockt wird.

#### Ping-Scan Ã¼berspringen / Host-Discovery auslassen:
```
nmap -Pn IP-Addresse
```

#### Service / Version Detection:
```
sudo nmap -sV IP-Addresse
```

Nutzen:

- Exakte Dienstversionen (z. B. â€Apache httpd 2.2.8â€œ)

- Identifikation potentieller CVEs

#### OS-Erkennung:
```
nmap -O -sV IP-Addresse
```

#### Aggressiver Scan
```
nmap -A IP-Addresse
```

Kombiniert:

- OS-Detection

- Service-Detection

- Script-Scanning

- Traceroute

#### Timing / Speed
```
nmap -T4 IP-Addresse
nmap -T5 IP-Addresse
```

Unterschiede:

- T3 (default): zuverlÃ¤ssig, moderat schnell

- T4: schneller, Standard fÃ¼r interne Labornetze

- T5: extrem schnell, aber ungenau und leicht sichtbar in IDS/IPS

#### Ausgabe in Dateien
```
nmap -oN scan.txt IP-Addresse
nmap -oX scan.xml IP-Addresse
nmap -oG scan.grepable IP-Addresse
```

- Nutzen:
Protokollierung, Weiterverarbeitung, Reporting.


#### Option --reason
```
nmap --reason IP-Addresse
```

Zeigt, WARUM ein Port als offen/geschlossen gilt (z. B. â€syn-ack receivedâ€œ).
Hilfreich beim Lernen, Debuggen oder IDS-Analyse.

#### Nur die N hÃ¤ufigsten Ports
```
nmap --top-ports IP-Addresse
```

Ein Portscan kann:

- Offene Ports identifizieren

- Erkennt, welche Netzwerkdienste erreichbar sind.

- Laufende Dienste erkennen

- Beispiel:

  - FTP

  - SSH

  - HTTP


- Service-Versionen bestimmen

- Versionen verraten oft bekannte Schwachstellen.

- MÃ¶gliche Schwachstellen ableiten

  - z. B. veraltetes OpenSSH, verwundbare Apache-Versionen, MySQL ohne Authentifizierung.

- Firewall-Regeln analysieren

  - Welche Ports blockiert?

  - Werden Pings gefiltert?

  - Unterschied zwischen â€closedâ€œ, â€filteredâ€œ, â€unfilteredâ€œ.

- Netzwerkarchitektur einschÃ¤tzen

  - Welche Systeme existieren?

  - Welche GerÃ¤te exponieren Dienste?

  - Welche Rollen (Gateway, Server, Client)?

- Betriebssysteme erkennen

  - Fingerprinting Ã¼ber Paketantworten.

#### Ãœbung (nmap cheat sheet)
Erstelle ein Cheat Sheet mit allen nmap Optionen die du verwendet hast und jenen die du fÃ¼r wichtig erachtest. Erstelle das cheat sheet so, dass es dir spÃ¤ter als Nachschlagewerk dienen kann.

# **Nmap Cheat Sheet**

## ğŸ” Grundscans

```
nmap <IP>              # Standard Scan
nmap -sn <IP/Netz>      # Ping Scan
nmap -Pn <IP>           # Ohne Host-Discovery
```

## ğŸ¯ Portauswahl

```
nmap -p- <IP>           # Alle Ports
nmap -p 22,80,443 <IP>  # Spezifische Ports
nmap --top-ports 100 <IP> # HÃ¤ufigste Ports
```

## âš™ï¸ Scan-Techniken

```
nmap -sS <IP>    # SYN Scan (Standard)
nmap -sT <IP>    # Connect Scan
nmap -sU <IP>    # UDP Scan
```

## ğŸ§© Service / Version / OS

```
nmap -sV <IP>    # Version Detection
nmap -O <IP>     # OS Detection
nmap -A <IP>     # Aggressiv: OS + Version + NSE
```

## ğŸš€ Timing

```
-T0 (langsam)
-T3 (Default)
-T4 (schnell, LAN)
-T5 (aggressiv)
```

## ğŸ“¦ Nmap Scripting Engine

```
nmap -sC <IP>           # Default Scripts
nmap --script=vuln <IP> # Schwachstellen
```

## ğŸ’¾ Ausgabe

```
nmap -oN out.txt <IP>
nmap -oX out.xml <IP>
nmap -oG out.grep <IP>
nmap -oA prefix <IP>    # Alle Formate
```

## ğŸ§  GrÃ¼nde fÃ¼r Portstatus

```
nmap --reason <IP>
```

## ğŸ“Œ Beispiel: Schneller Ãœberblick

```
nmap -sS -sV -T4 --top-ports 100 <IP>
```
